var LogWorker,blob=new Blob(["var SMSlogs = [];var accumulate = true;onmessage = function(e) {var message = e.data.msg;type = e.data.type;action = e.data.action; if (action === 'add') SMSlogs.push({type: type, msg: message, date: getDate()});else if (action === 'clear') SMSlogs = [];else if (action === 'get') self.postMessage(getText());if (SMSlogs.length > 5000) SMSlogs = [];};function getText() {var result = '';if (SMSlogs.length > 0) {for (var i in SMSlogs) {var line = SMSlogs[i];result += line.date + ' | ' + line.type + ' | ' + line.msg + '\\n';}} return result;};function getDate() {var date = new Date();var d = date.getDate();var mm = date.getMonth()+1;var y = date.getFullYear();var h = date.getHours();var m = date.getMinutes();var s = date.getSeconds();return y + '-' + mm + '-' + d + ' ' + h + ':' + m + ':' + s;};"]),SMSLogs=function(e){var e=e||{},t=void 0===e.debug||e.debug,r=e.level||["LOG","INFO","WARN","ERROR"],o=void 0===e.saveLogs||e.saveLogs,n=void 0!==e.silent&&e.silent;function a(e,t,r){LogWorker&&o&&(s(e)&&(e=g(e)),r&&(e=e+": "+g(r)),e&&LogWorker.postMessage({action:"add",msg:e,type:t}),"error"===t&&(LogWorker.postMessage({action:"get"}),!n&&confirm("JS Error, Refresh page?\n\r"+e)&&document.location.reload()))}function s(e){return e&&"object"==typeof e}function g(e){try{return JSON.stringify(e)}catch(t){return!1}return!0}o&&window.Worker&&((LogWorker=new Worker(URL.createObjectURL(blob))).onmessage=function(e){var t,r,o,n="SMSConsoleLogs.log";e.data,t=e.data,r=new XMLHttpRequest,o=window.appServerSms+"/scripts/trs.exe?cgi=ePos_send_jslogs.xml&DN=ePos&CN=PUBLIC&dbase_timeout=40",r.open("POST",o,!0),r.setRequestHeader("Content-type","text/plain; charset=UTF-8"),r.onreadystatechange=function(){4==r.readyState&&r.status},t=t.substring(t.length-2e3),r.send(encodeURIComponent(t))}),window.onerror=function(e,t,r,o,n){var a=["Message: "+e,"URL: "+t,"Line: "+r,"Column: "+o,"Error object: "+n.stack];return i.error(n.stack,a),!1};var i=function(){var e=window.console||{};function o(e,t){var r=new Date,o=r.getHours()+":"+(2==("0"+r.getMinutes()).length?"0"+r.getMinutes():r.getMinutes())+":"+(2==("0"+r.getSeconds()).length?"0"+r.getSeconds():r.getSeconds())+":"+r.getMilliseconds();return s(t)?g(t)?JSON.parse(JSON.stringify(t)):t:"log"===e||"info"===e?o+"> "+t:"warn"===e||"error"===e?t:void 0}return{log:function(n,s){r.indexOf("LOG")>-1&&(a(n,"log",s),e.log&&t&&(s?e.log(o("log",n),JSON.parse(JSON.stringify(s))):e.log(o("log",n))))},info:function(n){r.indexOf("INFO")>-1&&(a(n,"info"),e.info&&t&&e.info(o("info",n)))},warn:function(n){r.indexOf("WARN")>-1&&(a(n,"warn"),e.warn&&t&&e.warn(o("warn",n)))},error:function(n,s){r.indexOf("ERROR")>-1&&(a(n,"error"),e.error&&!s&&t&&e.error(o("error",n)))},dir:function(o){r.indexOf("LOG")>-1&&e.log&&t&&e.dir(o)},dirxml:function(o){r.indexOf("LOG")>-1&&e.log&&t&&e.dirxml(o)}}}();window.console=i};try{if(void 0!==LogWorker)var e={};e=window.SMSConsoleLogs||{},SMSLogs(e)}catch(t){console.log("SMS Logs error!"+t)}